<ng-container *ngTemplateOutlet="listItem;context:{tasks: scheduledTasks}"></ng-container>
<ng-container *ngTemplateOutlet="listItem;context:{tasks: unscheduledTasks}"></ng-container>

<ng-template #listItem let-tasks="tasks">
  <mat-list *ngIf="tasks">
    <mat-list-item *ngFor="let task of tasks" class="mat-elevation-z1">
      <mat-icon mat-list-icon>assignment</mat-icon>
      <h4 mat-line>{{task.name}}</h4>
      <p mat-line>ID: {{task.id}}</p>
      <p mat-line>
        <mat-form-field
          [class.mat-error]="isOverdue(task)"
          [color]="isOverdue(task) ? 'warn' : undefined">
          <input
            matInput
            [matDatepicker]="taskDatepicker"
            placeholder="Due date"
            [value]="task.due"
            (dateChange)="changeDueDate(task, $event)"/>
          <mat-datepicker-toggle matSuffix [for]="taskDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #taskDatepicker [color]="isOverdue(task) ? 'warn' : undefined"></mat-datepicker>
        </mat-form-field>
        <mat-form-field
          class="time-input"
          [class.mat-error]="isOverdue(task)"
          [color]="isOverdue(task) ? 'warn' : undefined">
          <input
            matInput
            type="time"
            [value]="task.due?.format('HH:mm')"
            [disabled]="!task.due"
            (blur)="changeDueTime(task, $event)"/>
        </mat-form-field>
      </p>
      <button mat-icon-button color="primary">
        <mat-icon aria-label="Delete task" (click)="delete(task)">delete</mat-icon>
      </button>
    </mat-list-item>
  </mat-list>
</ng-template>
